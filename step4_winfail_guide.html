<!DOCTYPE html>
<html lang="en">
<script src="functions.js"></script>
<script src="oocsi_lib.js"></script>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>step4</title>
    <link rel="stylesheet" href="styles_guide.css">
</head>
<script>
    function onLoadPage() {
        makeConnection(readCommandAndShowImg); // OOCSI connection and argument to the immage appearings function
    }

    window.onload = onLoadPage;

    function go2MultipleDecisionPointsStep5Guide() { // button bring me to the next step link
        window.location.href = "step5_MultipleDecisionPoint_guide.html";
    }

    function go2step5Indu() { //go to link, step 5 indu, look at the guiding phone.
        OOCSI.send(nameOfChannel, {'command': "switch4","link":"step5_indu.html"});
        console.log("did it send?");
    }

    function sent2OOCSIandGo2Step5() { //combining two functions
        go2step5Indu();
        go2MultipleDecisionPointsStep5Guide();
    }

</script>

<body>
    <div class="colourBorder borderL2">
        <div class="speakingBubble">
    <h1 id="countdown">Countdown! Look at your phone...</h1> <!-- get element id by name -->
    </div>
    <div class="img">
    <img src="images\workshop cards-05.png" alt="image of slide">
    <div id="imgShow"></div>
    </div>
    <div class="bmttns">
    <button onclick="sent2OOCSIandGo2Step5()"> Bring me to the next step! </button>
    </div>
    </div>

    <script>

        function addImgW() { //insead of using appendChild and call in other function that reads message from OOCSI
            //make a new img element
            const waterSprayimg = document.createElement("img");

            //source img
            waterSprayimg.setAttribute("src", "images\\workshop cards-41.png");

            //html tag location
            const location = document.getElementById("imgShow");

            //place image on location
            location.appendChild(waterSprayimg);

        }

        function addImgF() {//insead of using appendChild and call in other function that reads message from OOCSI
            //make a new img element
            const waterSprayimg = document.createElement("img");

            //source img
            waterSprayimg.setAttribute("src", "images\\workshop cards-42.png"); //repeats, only change in function

            //html tag location
            const location = document.getElementById("imgShow");

            //place image on location
            location.appendChild(waterSprayimg);
            
        }

        function readCommandAndShowImg(message) {
            if (message.data.command == "win"){
                addImgW();
            }
            else if (message.data.command == "fail"){
                addImgF();
            }
            else {
                addImgF();
            }
        }

    </script>

</body>

</html>